--- Makefile.PL	2018-12-07 20:53:10.735279447 +0000
+++ Makefile.PL	2018-12-07 20:55:00.008537893 +0000
@@ -8,6 +8,9 @@
 
 $expat_libpath = '';
 $expat_incpath = '';
+$lastvar = 'none';
+$ld = $Config{ld};
+$lddlflags = $Config{lddlflags};
 
 my @replacement_args;
 
@@ -19,10 +22,29 @@
     else {
       $expat_incpath = $2;
     }
-    #push(@replacement_args, "$1=$2");
+    $lastvar = 'none';
+  }
+  elsif ( /^(LD)=(.+)/ ) {
+    $ld = $2;
+    $lastvar = $1;
+  }
+  elsif ( /^(LDDLFLAGS)=(.+)/ ) {
+    $lddlflags = $2;
+    $lastvar = $1;
+  }
+  elsif ( $lastvar eq 'LD' ) {
+    $ld .= ' ' . $_;
+  }
+  elsif ( $lastvar eq 'LDDLFLAGS' ) {
+    $lddlflags .= ' ' . $_;
+  }
+  elsif ( /^(LDDLFLAGS)=(.+)/ ) {
+    $lddlflags = $2;
+    $lastvar = $1;
   }
   else {
     push(@replacement_args, $_);
+    $lastvar = 'none';
   }
 }
 
@@ -163,6 +185,8 @@
   DIR	=> [qw(Expat)],
   dist      => {COMPRESS => 'gzip', SUFFIX => '.gz'},
   VERSION_FROM => 'Parser.pm',
+  LD    => $ld,
+  LDDLFLAGS => $lddlflags,
   PREREQ_PM    => {
     LWP => 0, #for tests
   },
